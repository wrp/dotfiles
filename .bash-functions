
in_path() {
	# Check if $1 is in PATH
	case ":$PATH:" in
	*:$1:*) return 0;;
	*) return 1;;
	esac
}
clear_path() {
	# Ensure that $1 is not in PATH
	PATH=$(echo "$PATH" | sed \
		-e "s@:$1:@:@g" \
		-e "s@^$1:@@" \
		-e "s@:$1\$@@" \
	)
}
append_path() { in_path "$1" || PATH="$PATH${PATH:+:}$1"; }
prepend_path() { in_path "$1" || PATH="$1${PATH:+:}$PATH"; }

make_hist_file() {
	{
	printf '#%s Shell %d' "$(date +%s)" "$$"
	if test "$PPID" -gt 0 2> /dev/null; then
		printf ', child of %s,' "$(ps -o pid=,comm= $PPID)"
	fi
	printf ' begins in %s' "$PWD"
	printf '\n'
	} | tr -s ' ' >> $1
	export HISTFILE=$1
}
