#!/bin/sh

test -z "$*" && {
	if git_dir=$(git rev-parse --absolute-git-dir 2> /dev/null); then
		set "$(basename $(dirname "$git_dir"))"
	else
		set "$(pwd)"
	fi
}
if test -z "$left_justify"; then
	patt='.*\(.\{19\}\)'
	repl='<\1'
else
	patt='\(.\{19\}\).*'
	repl='\1>'
fi

title=$( echo "$*" | sed '/.\{20\}/s/^'$patt'$/'$repl/)

if test -n "$TMUX"; then
	tmux rename-window -- "$title"
else
	if test -n "$V"; then
		printf 'Not currently in a tmux session session' >&2
	fi
fi
