#!/bin/sh

# Execute a command, prepending headers to stdout and stderr
{ { $@ |
	perl >&3 -mPOSIX -pe 's/^/stdout: /;
		print POSIX::strftime "%y/%m/%d %H:%M:%S: ", gmtime'
} 2>&1 |
	perl -mPOSIX -pe 's/^/stderr: /;
		print POSIX::strftime "%y/%m/%d %H:%M:%S: ", gmtime'
} 3>&1
