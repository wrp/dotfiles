#!/bin/sh

die() { test -n "$*" && echo "$@" >&2; exit 1; }
if test "$1" = 0000000000000000000000000000000000000000; then
        url=$(git ls-remote 2>&1 > /dev/null | awk '{print $2; exit}')
        test -n "$url" || die Cannot find url of remote
        case $url in
        *github*) git config user.email "${GITHUB_EMAIL?}" ;;
        *)        git config user.email "${EMAIL?}" ;;
        esac
	git config user.name "${NAME?}"
fi
