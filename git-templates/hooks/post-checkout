#!/bin/sh

die() { test -n "$*" && echo "$@" >&2; exit 1; }

url=$(git ls-remote 2>&1 > /dev/null | awk '{print $2; exit}')
if test -z "$url" && test -z "$GIT_EMAIL_DEFAULT"; then
	die 'Cannot find url of remote, not configuring email.  Set GIT_EMAIL_DEFAULT to force'
fi
case $url in
*github*) git config user.email "${GITHUB_EMAIL?}" ;;
*)        git config user.email "${EMAIL?}" ;;
esac
git config user.name "${NAME?}"
